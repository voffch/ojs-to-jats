### Форма

Настройки *Параметры отображения текстовых полей* влияют только на отображение, но не на заполненную информацию. Если, например, вы заполните все англоязычные поля и выключите их на время чтобы не мешали заполнять русскоязычные, данные из англоязычных никуда не денутся.

Два крупных раздела формы - сведения о журнале и о статье. Информация о журнале сохраняется в браузере, о статье - нет (теряется при перезагрузке страницы). Для сохранения промежуточных результатов в том же меню, где кнопка вызова этой справочной страницы, есть возможность скачать и загрузить обратно введенную информацию о журнале и статье одновременно в формате json (не стандартизирован и используется только этим приложением).

Форма в целом почти повторяет ту, которая используется в ИС Метафора, с некоторыми OJS-специфичными оптимизациями. Звездочками в форме отмечены поля, которые отмечены в ИС Метафора и которые ее разработчики считают обязательными.

Пустые поля в форме слегка подсвечиваются. Это сделано только чтобы было лучше видно, что еще не заполнено.

#### На что обращать внимание

Для оптимизации производительности обновление данных происходит не мгновенно при вводе каждой буквы, а при обновлении текстового поля целиком. Это происходит когда поле теряет фокус (например, по клику в любое место страницы вне поля), а в случае однострочных полей еще и по нажатию Enter. Например, если вы поменяли аффилиацию одному из авторов и хотите увидеть изменения в XML, нажмите Enter или кликните куда-то вне поля с аффилиацией, чтобы изменения подхватились.

**URL PDF статьи** не записывается в JATS и нужен только для предпросмотра PDF (в браузере Firefox) и для загрузки PDF-файла вместе с XML в Метафору (при работе в режиме расширения). Если вам ничего из этого не нужно, можете не заполнять.

**Название и аннотация** в зависимости от того откуда загружены или скопированы могут содержать html-тэги. Автоматически они не убираются, чтобы вы видели, в каком виде у вас хранится информация. Вам их нужно убирать вручную, кликнув на соответствующую кнопку.

**Аннотация** в большинстве случаев должна состоять из одного абзаца (с точки зрения компьютера - из одной длинной строки). Чтобы контролировать этот момент, под полем аннотации есть счетчик строк. Так же как и значение поля, он обновляется не мгновенно, а только когда поле теряет фокус.

**Ключевые слова** в OJS некоторых версий разделяются точкой с запятой (если они *корректно* заполнены), поэтому и здесь тоже. Для любителей запятых есть кнопка для автозамены.

**Аффилиации авторов** в OJS забиваются в одну строчку в вольном формате. Почти никто их нормально не заполняет. А для JATS нужно разделять аффилиации на отдельные в случае, если автор аффилирован с несколькими организациями. Поэтому нужно делать так:

- если аффилиаций несколько, они должны разделяться точкой с запятой;
- если используется два языка, количество аффилиаций и порядок в котором они перечислены должны быть идентичны;
- если у нескольких авторов одна аффилиация, она должна быть идентично записана для всех. Так как приложение сравнивает строки на буквальное совпадение, с его точки зрения "`ФГАОУ ИГОГО Уральский университет`", "`Уральский федеральный университет`" и "`Уральский  Федеральный Университет.`" будут тремя разными аффилиациями. Это я к тому, что *в рамках одной статьи идентичные аффилиации разных авторов должны быть записаны абсолютно идентичным образом* (и в OJS тоже).

Если этих условий не соблюдать, вы наплодите некорректных аффилиаций в метаданных.

**Кнопка** *Убрать email* сделана для анонимизации, а *Убрать ФИО (язык)* - из-за особенностей одноязычности имен авторов в OJS 2. Если, например, журнал двухъязычный, а имена, которые только на английском, заполнились и в русские, и в английские поля, нажав одну кнопку можно убрать "нерусские" русские ФИО.

**Даты** записываются в формате ISO 8601, ГГГГ-ММ-ДД. Для преобразования их из более привычных ДД.ММ.ГГГГ есть кнопка. Если даты подхватились расширением браузера из OJS, **перепроверяйте все эти даты**, они не то, чем кажутся. В частности, *Дата получения публикации* заполняется из date submitted, а это внутренняя дата в которую submission был создан в OJS. Чему эта дата соответствует сильно зависит от особенности редакционного процесса в вашем журнале. Если, например, вы запускали за авторов статью (например, при переносе архива журнала в OJS с другой платформы), то дата в OJS не будет соответствовать фактической дате, когда авторы отправили статью.

**Страницы** должны содержать одно значение либо два через дефис (*первая-последняя* страницы). Тире не допускается, и длинное тире тоже, и *с.* и *p.* здесь быть не должно. С точки зрения и OJS, и моей формы "c. 23—945" - неправильно заполненные страницы, правильно будет "23-945".

**Список литературы** тоже не должен содержать тэгов. В нем должны быть только источники - по одному на строчку (см. счетчик строк под текстовым полем).

#### Результат

Под формой расположены две вкладки 

![вкладки](/img/tabs.png)

Под левой в текстовом виде JATS XML, под которым есть ссылка на скачивание готового файла XML (слева) и валидатор NISO (справа). Валидатор вам скорее всего не понадобится, но если будете пользоваться, можно не обращать внимание на ошибки JATS4R Schematron - он сделан давно и из расчета на более старую версию JATS.

Под правой вкладкой планируется воспроизводить в текстовом виде метаданные статьи, сгенерированные обратно из XML, чтобы проще было проверять корректность введенных данных. Сейчас там только полные имена авторов и аффилиации - то, с чем проще всего ошибиться.

Обратите также внимание что в моих формах практически нет семантической валидации. Отчасти это так потому что какая-то валидация есть в Метафоре, а отчасти - потому что если вы очень хотите забивать DOI и ключевые слова в аннотацию, а название статьи - в дату публикации, то я не буду вам мешать. Чистота ваших метаданных в первую очередь на вашей совести.